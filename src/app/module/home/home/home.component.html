<div class="homepage-container">
    <!-- Header (Desktop/Tablet: Includes module links; Mobile: Basic) -->
    <header class="header">
      <div class="logo">Business Hub</div>
      <nav class="nav-links desktop-tablet-nav" *ngIf="!isMobileView">
        <a (click)="navigateToAbout()" class="link">About Us</a>
        <div *ngFor="let module of modules" class="dropdown">
          <button class="btn btn-action dropdown-toggle">{{ module.name }}</button>
          <div class="dropdown-menu">
            <a *ngFor="let subLink of module.subLinks" (click)="navigateToModule(subLink.route)" class="dropdown-item">{{ subLink.name }}</a>
          </div>
        </div>
        <button class="btn btn-action" (click)="toggleLogin()">
          {{ isLoggedIn ? 'Logout' : 'Login' }}
        </button>
      </nav>
      <nav class="nav-links mobile-nav" *ngIf="isMobileView">
        <a (click)="navigateToAbout()" class="link">About Us</a>
        <button class="btn btn-action" (click)="toggleLogin()">
          {{ isLoggedIn ? 'Logout' : 'Login' }}
        </button>
      </nav>
    </header>
  
    <!-- Main Content -->
    <main class="main-content">
      <section class="hero-section text-center">
        <h1>Welcome to Business Hub</h1>
        <p>Your all-in-one platform to manage every aspect of your business efficiently.</p>
        <button *ngIf="!isLoggedIn" class="btn btn-apply btn-large" (click)="toggleLogin()">Get Started - Login Now</button>
      </section>
  
      <!-- Modules Section (Visible only when logged in on Desktop/Tablet) -->
      <section *ngIf="isLoggedIn && !isMobileView" class="modules-section">
        <h2 class="section-title">Dashboard Modules</h2>
        <div class="modules-grid">
          <div *ngFor="let module of modules" class="module-card" (click)="navigateToModule(module.route)">
            <img [src]="module.iconUrl" [alt]="module.name" class="module-icon">
            <h3 class="module-name">{{ module.name }}</h3>
            <p class="module-desc">{{ module.description }}</p>
            <button class="btn btn-action">Go to {{ module.name }}</button>
          </div>
        </div>
      </section>
    </main>
  
    <!-- Mobile Add Menu (Popup when Add icon clicked) -->
    <div *ngIf="isLoggedIn && isMobileView && showAddMenu" class="popup add-menu">
      <div class="popup-header">
        <h3>Add Actions</h3>
        <button class="close-btn btn btn-cancel" (click)="toggleAddMenu()">×</button>
      </div>
      <div class="popup-content">
        <div *ngFor="let module of modules" class="add-subitem" (click)="navigateToModule(module.route + '/add')">
          Add to {{ module.name }}
        </div>
      </div>
    </div>
  
    <!-- Mobile Modules Menu (Popup when Modules icon clicked) -->
    <div *ngIf="isLoggedIn && isMobileView && showModulesMenu" class="popup modules-menu">
      <div class="popup-header">
        <h3>Modules</h3>
        <button class="close-btn btn btn-cancel" (click)="toggleModulesMenu()">×</button>
      </div>
      <div class="popup-content">
        <div *ngFor="let module of modules" class="module-group">
          <div class="module-header" (click)="navigateToModule(module.route)">
            <img [src]="module.iconUrl" [alt]="module.name" class="sub-icon">
            <span>{{ module.name }}</span>
          </div>
          <div *ngFor="let subLink of module.subLinks" class="sub-link" (click)="navigateToModule(subLink.route)">
            {{ subLink.name }}
          </div>
        </div>
      </div>
    </div>
  
    <!-- Footer (Mobile: Icons when logged in; Desktop/Tablet: Copyright) -->
    <footer class="footer">
      <div *ngIf="!isLoggedIn || !isMobileView" class="copyright">
        <p>&copy; 2025 Business Hub. All rights reserved.</p>
      </div>
      <div *ngIf="isLoggedIn && isMobileView" class="mobile-footer-icons">
        <div class="icon-item" (click)="navigateToModule('/')">
          <img src="https://img.icons8.com/ios/50/home.png" alt="Home" class="footer-icon">
          <span>Home</span>
        </div>
        <div class="icon-item" (click)="navigateToModule('/search')">
          <img src="https://img.icons8.com/ios/50/search.png" alt="Search" class="footer-icon">
          <span>Search</span>
        </div>
        <div class="icon-item" (click)="toggleAddMenu()">
          <img src="https://img.icons8.com/ios/50/plus.png" alt="Add" class="footer-icon">
          <span>Add</span>
        </div>
        <div class="icon-item" (click)="toggleModulesMenu()">
          <img src="https://img.icons8.com/ios/50/menu.png" alt="Modules" class="footer-icon">
          <span>Modules</span>
        </div>
      </div>
    </footer>
  </div>